#!/usr/bin/env ruby

require 'bundler/inline'

gemfile do
  source 'https://rubygems.org'

  gem 'thor'
  gem 'pry'
  gem 'require_all'
end

require_rel '../lib/commands'

module Dotfiles
  class CLI < Thor
    desc 'build', 'build dotfiles'
    option :theme, aliases: '-t', desc: 'Theme dark/light'
    def build
      theme = options[:theme]

      Build.new(theme: theme).run
      # NeovimThemeSwitcher.switch(theme)
    end

    # def dark
    #   # remember last machine
    #   # dot build -t dark
    # end
    #
    # def light
    # end

    # desc 'doctor', 'doctor dotfiles'
  #   check if config havent been changed on generated files?
  #   show repo state?
    # def doctor
    #   puts "Not implemented"
    # end
    #
    # def theme
    # end

    # default_task :build
  end
end

Dotfiles::CLI.start
