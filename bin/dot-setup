#!/usr/bin/env bash

sudo systemctl enable --now wpa_supplicant.service
sudo systemctl restart NetworkManager.service
sudo dnf install ansible git ruby -y
ansible-galaxy collection install community.general
ansible-galaxy collection install community.mysql

gpg2 --recv-keys 409B6B1796C275462A1703113804BB82D39DC0E3 7D2BAF1CF37B13E2069D6956105BD0E739499BDB || exit 1
curl -sSL https://get.rvm.io | bash -s
# TODO this does not work in a sub-shell
source ~/.rvm/scripts/rvm
rvm pkg install openssl
rvm install 3.1.2
rvm docs generate-ri
# TODO this needs to be done manually it seems
# rvm use ... --default

mkdir -p ~/repos
pushd ~/repos
[ ! -d dotfiles ] && git clone https://github.com/vikdotdev/dotfiles
./dotfiles/bin/dot install
popd

# curl -o- https://raw.githubusercontent.com/creationix/nvm/v0.39.1/install.sh | bash
# source ~/.nvm/nvm.sh && nvm install --lts
# npm -g install yarn
